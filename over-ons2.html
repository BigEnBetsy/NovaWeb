<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NovaWeb - Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="preload" as="image" href="Fotos/wp6.jpg">
  <link rel="stylesheet" href="over-ons.css">
  <style>
    /* ====================== ALLE CSS (EXACT ZOALS ORIGINEEL + PERFECT MOBIEL) ====================== */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; color:white; }
    html { scrollbar-width:none; -ms-overflow-style:none; scroll-behavior:smooth; }
    html::-webkit-scrollbar, body::-webkit-scrollbar { display:none; }

    body {
      background:url('Fotos/wp8.jpg') no-repeat center center fixed;
      background-size:cover; color:#fff; min-height:100vh; position:relative; overflow-x:hidden;
    }

    /* Header */
    header {
      display:flex; justify-content:space-between; align-items:center; padding:20px 50px;
      height:80px; position:fixed; top:0; left:0; width:100%; z-index:1000;
      background:rgba(0,0,0,0.15); backdrop-filter:blur(5px); -webkit-backdrop-filter:blur(5px);
      border-bottom:1px solid rgba(255,255,255,0.1); box-shadow:0 2px 12px rgba(0,0,0,0.25);
      transition:all .4s ease;
    }
    header.scrolled {
      background:rgba(0,0,0,0.35); backdrop-filter:blur(8px); border-bottom:1px solid rgba(255,214,10,0.3);
      box-shadow:0 4px 18px rgba(0,0,0,0.4);
    }
    .logo-img { height:80px; filter:drop-shadow(0 0 15px rgba(255,214,10,0.5)); transition:all .3s; }
    .logo-img:hover { filter:drop-shadow(0 0 25px rgba(255,214,10,0.8)); transform:scale(1.05); }
    .logo-fallback { font-weight:800; font-size:1.5rem; color:#ffd60a; text-shadow:0 0 10px rgba(255,214,10,0.5); }

    nav { position:absolute; left:50%; transform:translateX(-50%); display:flex; gap:50px; }
    nav a { font-weight:600; color:#fff; text-decoration:none; font-size:1.1rem; position:relative; padding:10px 0; transition:all .3s; }
    nav a::after { content:''; position:absolute; bottom:0; left:0; width:0; height:2px; background:linear-gradient(45deg,#ffd60a,#ffed4e); transition:width .3s; }
    nav a:hover::after { width:100%; } nav a:hover { color:#ffd60a; transform:translateY(-2px); }

    .header-buttons { display:flex; align-items:center; gap:20px; }
    .login-btn, .contact-btn { border-radius:50px; padding:12px 30px; font-weight:700; text-decoration:none; position:relative; overflow:hidden; transition:all .3s; }
    .login-btn { background:transparent; border:2px solid rgba(255,214,10,0.7); color:#ffd60a; }
    .login-btn:hover { background:rgba(255,214,10,0.1); border-color:#ffd60a; transform:translateY(-2px); box-shadow:0 5px 15px rgba(255,214,10,0.3); }
    .contact-btn { background:linear-gradient(45deg,#ffd60a,#ffed4e); color:#0d3b66; }
    .contact-btn:hover { transform:translateY(-3px); box-shadow:0 10px 25px rgba(255,214,10,0.4); }

    .chat-icon { width:34px; height:34px; cursor:pointer; transition:transform .2s; }
    .chat-icon:hover { transform:scale(1.1); }

    /* Hamburger */
    .hamburger { display:none; flex-direction:column; gap:6px; width:30px; height:25px; cursor:pointer; z-index:1100; }
    .hamburger span { height:3px; background:#ffd60a; border-radius:2px; transition:all .3s; }
    .hamburger.active span:nth-child(1) { transform:translateY(8px) rotate(45deg); }
    .hamburger.active span:nth-child(2) { opacity:0; }
    .hamburger.active span:nth-child(3) { transform:translateY(-8px) rotate(-45deg); }

    /* Hero */
    .hero { min-height:100vh; display:grid; grid-template-columns:1fr 1fr; align-items:center; padding:0 50px; position:relative; overflow:hidden; }
    .hero-content { z-index:3; padding-right:50px; }
    .hero h1 { font-size:4.5rem; font-weight:800; margin-bottom:1.5rem; background:linear-gradient(135deg,#fff 0%,#ffd60a 50%,#fff 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; animation:gradientShift 3s ease-in-out infinite; }
    @keyframes gradientShift { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    .highlight { display:block; margin-top:.5rem; }
    .hero-subtitle { font-size:1.4rem; margin-bottom:3rem; opacity:.9; max-width:500px; }
    .hero-buttons { display:flex; gap:20px; flex-wrap:wrap; }
    .btn-primary,.btn-secondary { padding:18px 35px; border-radius:50px; font-weight:600; font-size:1.1rem; border:none; cursor:pointer; transition:all .3s; }
    .btn-primary { background:linear-gradient(45deg,#ffd60a,#ffed4e); color:#0d3b66; box-shadow:0 10px 30px rgba(255,214,10,.3); }
    .btn-primary:hover { transform:translateY(-3px); box-shadow:0 15px 40px rgba(255,214,10,.5); }
    .btn-secondary { background:transparent; border:2px solid #ffd60a; color:#ffd60a; }
    .btn-secondary:hover { background:#ffd60a; color:#0d3b66; }

    .student-showcase { display:grid; grid-template-columns:1fr 1fr; gap:25px; margin-top:50px; }
    .student-card { background:rgba(255,255,255,.05); backdrop-filter:blur(20px); border-radius:25px; padding:30px; text-align:center; border:1px solid rgba(255,255,255,.1); transition:all .4s; }
    .student-card:hover { transform:translateY(-10px) scale(1.02); background:rgba(255,255,255,.1); border-color:rgba(255,214,10,.3); }
    .student-photo { width:100px; height:100px; border-radius:50%; object-fit:cover; margin:0 auto 20px; border:3px solid rgba(255,214,10,.5); }
    .student-badge { background:rgba(255,214,10,.2); color:#ffd60a; padding:8px 20px; border-radius:25px; font-size:.9rem; border:1px solid rgba(255,214,10,.3); }

    /* Chat Box */
    .chat-box { position:fixed; top:90px; right:20px; width:320px; height:420px; background:#929292; border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,.2); display:flex; flex-direction:column; overflow:hidden; transform:translateX(120%); opacity:0; transition:all .4s; z-index:9999; }
    .chat-box.active { transform:translateX(0); opacity:1; }
    .chat-header { background:#0d3b66; color:white; padding:12px 15px; display:flex; justify-content:space-between; align-items:center; }
    .chat-header button { background:none; border:none; color:white; font-size:20px; cursor:pointer; }
    .chat-messages { flex:1; padding:15px; overflow-y:auto; background:#a4a4a4; display:flex; flex-direction:column; gap:8px; }
    .message { padding:10px 14px; border-radius:12px; max-width:80%; font-size:.95rem; }
    .message.bot { background:#5794d2; align-self:flex-start; color:#000; }
    .message.user { background:#ffd60a; color:#0d3b66; align-self:flex-end; }
    .chat-input-area { display:flex; border-top:1px solid #ddd; padding:10px; background:#fff; }
    .chat-input-area input { flex:1; border:1px solid #ccc; border-radius:10px; padding:8px 10px; background:#dbdbdb; color:#000; }
    .chat-input-area button { background:#ffd60a; border:none; color:#0d3b66; font-weight:bold; border-radius:10px; margin-left:8px; padding:8px 14px; cursor:pointer; }

    /* ====================== MOBIEL: MENU VAN LINKS (ZOALS JIJ WILDE) ====================== */
    @media (max-width: 768px) {
      header { padding:10px 15px; height:auto; }
      .logo, .logo-img, .logo-fallback { display:none; }
      .hamburger { display:flex; }
      .header-buttons { display:none; }

      nav {
        position:fixed; top:0; left:0; width:70%; max-width:300px; height:100vh;
        background:rgba(0,0,0,0.9); backdrop-filter:blur(8px);
        flex-direction:column; align-items:flex-start; justify-content:flex-start;
        padding:60px 20px 20px; gap:25px;
        transform:translateX(-100%); transition:transform .3s ease-in-out;
        z-index:1000;
      }
      nav.active { transform:translateX(0); }

      /* Knoppen in menu */
      .nav-header-buttons {
        display:flex; flex-direction:column; align-items:center; gap:10px; margin-top:20px; width:100%;
      }
      .nav-header-buttons a, .nav-header-buttons .chat-container {
        width:80%; text-align:center; margin:5px 0;
      }

      /* Hero */
      .hero { grid-template-columns:1fr; padding:80px 15px 30px; text-align:center; }
      .hero h1 { font-size:2.5rem; }
      .hero-subtitle { font-size:1.1rem; max-width:90%; margin:0 auto 2rem; }
      .hero-buttons { flex-direction:column; gap:12px; }
      .btn-primary,.btn-secondary { width:100%; max-width:280px; margin:0 auto; padding:12px 20px; }

      .student-showcase { grid-template-columns:1fr; gap:15px; max-width:90%; margin:30px auto; }
      .student-card { padding:20px; }
      .student-photo { width:70px; height:70px; }

      .chat-box {
        top:auto; bottom:20px; right:5%; width:90%; max-width:340px; height:70vh; max-height:450px;
        transform:translateY(100%); border-radius:12px;
      }
      .chat-box.active { transform:translateY(0); }
    }

    @media (max-width: 480px) {
      .hero h1 { font-size:2rem; }
      .hero-subtitle { font-size:1rem; }
      .btn-primary,.btn-secondary { padding:10px 18px; font-size:.9rem; }
      .student-photo { width:60px; height:60px; }
      .chat-box { width:95%; max-height:400px; }
    }

    @media (min-width: 2001px) {
      body { font-size:120%; } header { padding:24px 60px; } .logo-img { height:100px; } nav { gap:60px; } nav a { font-size:1.32rem; }
      .hero h1 { font-size:5.5rem; } .hero-subtitle { font-size:1.8rem; }
    }
  </style>
</head>
<body>

<header>
  <div class="logo">
    <img src="Fotos/Logo.svg" alt="NovaWeb Logo" class="logo-img"
         onerror="this.style.display='none'; document.getElementById('logoFallback').style.display='flex';">
    <div id="logoFallback" class="logo-fallback" style="display:none;">NOVAWEB</div>
  </div>

  <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>

  <nav id="navMenu">
    <a href="index.html">Home</a>
    <a href="over-ons.html">Over ons</a>
    <a href="projecten.html">Portfolio</a>
    <a href="diensten.html">Diensten</a>
    <a href="klantenProject.html">Mijn projecten</a>
  </nav>

  <div class="header-buttons">
    <a href="login.html" class="login-btn">Login</a>
    <a href="contact.html" class="contact-btn">Contact us</a>
    <div class="chat-container">
      <img src="Fotos/chat.png" alt="Chat" class="chat-icon" id="chatToggle">
    </div>
  </div>

  <div class="chat-box" id="chatBox">
    <div class="chat-header">
      <span>Chat met NovaWeb</span>
      <button id="closeChat">×</button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message bot">Hoi! Hoe kunnen we je helpen vandaag?</div>
    </div>
    <div class="chat-input-area">
      <input type="text" id="chatInput" placeholder="Typ een bericht..." />
      <button id="sendChat">Verstuur</button>
    </div>
  </div>
</header>

<main>
    <!-- Over Ons Sectie -->
    <section id="about" class="about">
      <div class="container">
        <h2>Ontmoet Het Team Achter NovaWeb</h2>
        <div class="about-content">
          <div class="about-text">
            <p class="intro-text">Wij zijn <strong>Stef Galler</strong> en <strong>Robin Baeyens</strong>, twee gedreven studenten die onze gedeelde passie voor technologie en ondernemerschap hebben omgezet in <strong>NovaWeb</strong>. Als jonge ondernemers begrijpen we als geen ander hoe belangrijk een professionele online aanwezigheid is voor starters en kleine bedrijven.</p>

            <div class="mission-vision">
              <div class="mission">
                <h3>🎯 Onze Missie</h3>
                <p>Betaalbare, hoogwaardige weboplossingen toegankelijk maken voor elk bedrijf. Wij geloven dat een professionele website geen fortuin hoeft te kosten.</p>
              </div>
              <div class="vision">
                <h3>🚀 Onze Visie</h3>
                <p>De referentie worden in student-ondernemerschap door innovatie, kwaliteit en persoonlijke service te combineren tegen een eerlijke prijs.</p>
              </div>
            </div>

            <div class="student-story">
              <h3>📖 Ons Verhaal</h3>
              <p>Tijdens onze studies ontdekten we een gemeenschappelijke passie: het creëren van digitale oplossingen die écht impact maken. Wat begon als een studieproject groeide uit tot een gedeelde ambitie - een eigen webdevelopment bedrijf starten waar we theorie in praktijk kunnen omzetten.</p>
              
              <p><strong>NovaWeb</strong> werd geboren uit de overtuiging dat kwaliteit en betaalbaarheid hand in hand kunnen gaan. Onze studentenstatus zien we niet als beperking, maar als kracht: we zijn gemotiveerd, up-to-date met de nieuwste technologieën en begrijpen de uitdagingen van startende ondernemers.</p>

              <p>Elk project is voor ons een kans om te groeien, te leren en onze klanten te helpen slagen in de digitale wereld. We combineren academische kennis met praktische toepassing om resultaten te leveren die er professioneel uitzien en optimaal presteren.</p>
            </div>

            <div class="team-showcase">
              <div class="team-member">
                <img src="Fotos/Stef.jpg" alt="Stef Galler - Back-end Developer" class="member-photo">
                <div class="member-info">
                  <h3>Stef Galler</h3>
                  <p class="member-role">Informatica Student & Full-stack Developer</p>
                  <p class="member-bio">Als informatica student aan HoGent specialiseer ik me in data-analyse, kunstmatige intelligentie en back-end development. Mijn sterke punten liggen in het creëren van robuuste, schaalbare systemen en het implementeren van complexe logica. Ik zorg ervoor dat elke website niet alleen mooi is, maar ook technisch perfect functioneert.</p>
                  <div class="expertise">
                    <h4>Expertise Gebieden:</h4>
                    <div class="member-skills">
                      <span class="skill-tag">Python</span>
                      <span class="skill-tag">JavaScript</span>
                      <span class="skill-tag">React</span>
                      <span class="skill-tag">Node.js</span>
                      <span class="skill-tag">REST API</span>
                      <span class="skill-tag">Database Design</span>
                      <span class="skill-tag">System Architecture</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="team-member">
                <img src="Fotos/Robin.jpg" alt="Robin Baeyens - Front-end Developer" class="member-photo">
                <div class="member-info">
                  <h3>Robin Baeyens</h3>
                  <p class="member-role">Mechanica Student & Creative Developer</p>
                  <p class="member-bio">Mijn achtergrond in mechanica geeft me een unieke kijk op gebruikerservaring en interface design. Als autodidact front-end developer focus ik me op het creëren van intuïtieve, visueel aantrekkelijke interfaces die perfect functioneren op elk apparaat. Mijn doel is om elke gebruiker een naadloze en prettige ervaring te bieden.</p>
                  <div class="expertise">
                    <h4>Expertise Gebieden:</h4>
                    <div class="member-skills">
                      <span class="skill-tag">HTML5/CSS3</span>
                      <span class="skill-tag">JavaScript ES6+</span>
                      <span class="skill-tag">UI/UX Design</span>
                      <span class="skill-tag">Responsive Design</span>
                      <span class="skill-tag">Web Animation</span>
                      <span class="skill-tag">Modern CSS Frameworks</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="development-process">
              <h3>🛠️ Onze Werkwijze</h3>
              <div class="process-steps">
                <div class="process-step">
                  <span class="step-number">1</span>
                  <h4>Consultatie & Analyse</h4>
                  <p>Gratis intakegesprek om uw behoeften en doelen te begrijpen</p>
                </div>
                <div class="process-step">
                  <span class="step-number">2</span>
                  <h4>Design & Planning</h4>
                  <p>Creatie van wireframes en gedetailleerd projectplan</p>
                </div>
                <div class="process-step">
                  <span class="step-number">3</span>
                  <h4>Development & Feedback</h4>
                  <p>Agile ontwikkeling met regelmatige updates en feedback loops</p>
                </div>
                <div class="process-step">
                  <span class="step-number">4</span>
                  <h4>Lancering & Support</h4>
                  <p>Professionele lancering en doorlopende ondersteuning</p>
                </div>
              </div>
            </div>

            <!-- NIEUWE KERNWAARDEN SECTIE - ZONDER VAKKEN -->
            <div class="core-values">
              <h3>💎 Wat Ons Drijft</h3>
              <div class="values-content">
                <div class="values-text">
                  <p>Bij NovaWeb zijn we gepassioneerd door wat we doen, en dat vertaalt zich in zes kernprincipes die de basis vormen van elk project:</p>
                  
                  <div class="values-list">
                    <div class="value-line">
                      <span class="value-emoji">💰</span>
                      <div class="value-content">
                        <strong>Betaalbaarheid zonder compromis</strong>
                        <p>We bieden studententarief aan zonder in te leveren op kwaliteit. Onze transparante prijsstructuur zorgt ervoor dat u nooit voor verrassingen komt te staan.</p>
                      </div>
                    </div>
                    
                    <div class="value-line">
                      <span class="value-emoji">⚡</span>
                      <div class="value-content">
                        <strong>Betrouwbaarheid boven alles</strong>
                        <p>Met onze 100% tevredenheidsgarantie kunt u met een gerust hart bij ons aankloppen. Niet tevreden? Dan krijgt u uw geld terug - zonder gedoe.</p>
                      </div>
                    </div>
                    
                    <div class="value-line">
                      <span class="value-emoji">🤝</span>
                      <div class="value-content">
                        <strong>Persoonlijke connectie</strong>
                        <p>Geen tussenpersonen of call centers. U werkt direct samen met de ontwikkelaars, wat zorgt voor snelle communicatie en een aanpak op maat.</p>
                      </div>
                    </div>
                    
                    <div class="value-line">
                      <span class="value-emoji">🎯</span>
                      <div class="value-content">
                        <strong>Innovatie als standaard</strong>
                        <p>We blijven continu bijleren en implementeren de nieuwste technologieën om uw website toekomstbestendig te maken.</p>
                      </div>
                    </div>
                    
                    <div class="value-line">
                      <span class="value-emoji">🚀</span>
                      <div class="value-content">
                        <strong>Snelheid met precisie</strong>
                        <p>Onze gestroomlijnde processen zorgen voor snelle levering zonder kwaliteitsverlies. Gemiddeld leveren we binnen 2-4 weken.</p>
                      </div>
                    </div>
                    
                    <div class="value-line">
                      <span class="value-emoji">🔧</span>
                      <div class="value-content">
                        <strong>Kwaliteit in elk detail</strong>
                        <p>Van schone code tot gebruiksvriendelijke interfaces - we besteden aandacht aan elk aspect om een superieur eindresultaat te garanderen.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="about-stats">
            <div class="stat">
              <span class="stat-number">100%</span>
              <span class="stat-label">Klanttevredenheid</span>
            </div>
            <div class="stat">
              <span class="stat-number">15+</span>
              <span class="stat-label">Projecten Voltooid</span>
            </div>
            <div class="stat">
              <span class="stat-number">24/7</span>
              <span class="stat-label">Support Beschikbaar</span>
            </div>
            <div class="stat">
              <span class="stat-number">2-4</span>
              <span class="stat-label">Weken Levertijd</span>
            </div>
            <div class="stat">
              <span class="stat-number">€199</span>
              <span class="stat-label">Startpakket</span>
            </div>
            <div class="stat">
              <span class="stat-number">100%</span>
              <span class="stat-label">Geld-terug Garantie</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Waarom Kiezen Voor Ons -->
    <section class="why-choose-us">
      <div class="container">
        <h2>Waarom Kiezen Voor NovaWeb?</h2>
        <div class="reasons-grid">
          <div class="reason-card">
            <div class="reason-icon">💡</div>
            <h3>Innovatieve Oplossingen</h3>
            <p>We combineren academische kennis met praktische ervaring om cutting-edge weboplossingen te creëren die meegroeien met uw bedrijf.</p>
          </div>
          <div class="reason-card">
            <div class="reason-icon">⚡</div>
            <h3>Snelle & Flexibele Service</h3>
            <p>Geen bureaucratie of lange wachttijden. Direct contact, snelle beslissingen en agile ontwikkeling.</p>
          </div>
          <div class="reason-card">
            <div class="reason-icon">🎯</div>
            <h3>Gepersonaliseerde Aanpak</h3>
            <p>Elk project is uniek en krijgt onze volledige aandacht. Van concept tot lancering begeleiden we u persoonlijk.</p>
          </div>
          <div class="reason-card">
            <div class="reason-icon">💰</div>
            <h3>Uitstekende Prijs-Kwaliteit</h3>
            <p>Professionele resultaten tegen een fractie van de marktprijs. Geen compromissen op kwaliteit.</p>
          </div>
          <div class="reason-card">
            <div class="reason-icon">🔧</div>
            <h3>Moderne Technologieën</h3>
            <p>We werken met de nieuwste tools en frameworks om toekomstbestendige, schaalbare oplossingen te leveren.</p>
          </div>
          <div class="reason-card">
            <div class="reason-icon">📈</div>
            <h3>Resultaatgericht</h3>
            <p>We meten ons succes aan het succes van uw project. Duidelijke doelen, transparante communicatie.</p>
          </div>
        </div>

        <div class="cta-section">
          <h3>Klaar om Uw Digitale Droom te Verwezenlijken?</h3>
          <p>Neem vandaag nog contact op voor een gratis consultatie en ontdek hoe we uw online aanwezigheid naar een hoger niveau kunnen tillen.</p>
          <div class="cta-buttons">
            <a href="diensten.html" class="btn-primary">Start Jouw Project</a>
            <a href="diensten.html" class="btn-secondary">Gratis Consultatie</a>
          </div>
        </div>
      </div>
    </section>
  </main>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabaseUrl = 'https://fmrvruyofieuhxmmrbux.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZtcnZydXlvZmlldWh4bW1yYnV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MDA0NTIsImV4cCI6MjA3NTQ3NjQ1Mn0.KooHvMATpbJqXmIkquvJcHVIqDo1G5ALWTiYVI7rlvg';
  const supabase = createClient(supabaseUrl, supabaseKey);
  let user = null;

  const nav = document.getElementById('navMenu');
  const hamburger = document.getElementById('hamburger');
  const chatBox = document.getElementById('chatBox');
  const chatToggle = document.getElementById('chatToggle');
  const closeChat = document.getElementById('closeChat');
  const headerButtons = document.querySelector('.header-buttons');
  const loginBtn = document.querySelector('.login-btn');

  // === Verplaats knoppen naar mobiel menu (van LINKS) ===
  function moveHeaderButtonsToNav() {
    const old = document.querySelector('.nav-header-buttons');
    if (old) old.remove();
    if (window.innerWidth > 768) return;

    const clone = headerButtons.cloneNode(true);
    clone.classList.add('nav-header-buttons');
    clone.style.cssText = 'display:flex;flex-direction:column;align-items:center;gap:10px;margin-top:20px;width:100%';
    clone.querySelectorAll('a, .chat-container').forEach(el => {
      el.style.cssText = 'width:80%;text-align:center;margin:5px 0';
    });
    nav.appendChild(clone);

    const clonedChat = clone.querySelector('.chat-container');
    if (clonedChat) {
      clonedChat.addEventListener('click', () => {
        chatBox.classList.toggle('active');
        nav.classList.remove('active');
        hamburger.classList.remove('active');
      });
    }
  }

  window.addEventListener('DOMContentLoaded', async () => {
    moveHeaderButtonsToNav();

    const { data: { session } } = await supabase.auth.getSession();
    user = session?.user ?? null;
    if (user && loginBtn) { loginBtn.innerText = 'Account'; loginBtn.href = 'account.html'; }

    supabase.auth.onAuthStateChange((_e, sess) => {
      user = sess?.user ?? null;
      if (!loginBtn) return;
      loginBtn.innerText = user ? 'Account' : 'Login';
      loginBtn.href = user ? 'account.html' : 'login.html';
    });
  });
  window.addEventListener('resize', moveHeaderButtonsToNav);

  // Hamburger
  hamburger.addEventListener('click', () => {
    hamburger.classList.toggle('active');
    nav.classList.toggle('active');
  });
  nav.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
    nav.classList.remove('active');
    hamburger.classList.remove('active');
  }));

  // Chat
  chatToggle.addEventListener('click', () => {
    chatBox.classList.toggle('active');
    nav.classList.remove('active');
    hamburger.classList.remove('active');
  });
  closeChat.addEventListener('click', () => chatBox.classList.remove('active'));

  // Admin
  const adminEmails = ['gallerstef@gmail.com', 'robin.baeyens27@gmail.com'];
  if (user && adminEmails.includes(user.email)) {
    chatToggle.addEventListener('click', () => location.href = 'admin.html');
  } else {
    document.getElementById('sendChat').addEventListener('click', sendMessage);
    document.getElementById('chatInput').addEventListener('keypress', e => e.key === 'Enter' && sendMessage());

    async function loadMessages() {
      if (!user) return;
      const { data } = await supabase.from('messages').select('*').eq('email', user.email).order('created_at', { ascending: true });
      const chat = document.getElementById('chatMessages');
      chat.innerHTML = data.length === 0 ? '<div class="message bot">Nog geen berichten. Stuur een bericht om te starten!</div>' : '';
      data.forEach(addMessage);
      chat.scrollTop = chat.scrollHeight;
    }

    function addMessage(msg) {
  const div = document.createElement('div');
  div.className = `message ${msg.role === 'user' ? 'user' : 'bot'}`;
  const txt = document.createElement('div');
  txt.textContent = msg.message;

  const time = document.createElement('div');
  time.className = 'message-time';
  time.style.fontSize = '0.75rem';
  time.style.opacity = '0.7';
  time.style.marginTop = '4px';

  // DATUM CORRECT GEFORMATTEERD
  const date = new Date(msg.created_at);
  time.textContent = !isNaN(date.getTime())
    ? date.toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' })
    : 'Nu';

  div.append(txt, time);
  document.getElementById('chatMessages').appendChild(div);
  document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
}

async function sendMessage() {
  const input = document.getElementById('chatInput');
  const txt = input.value.trim();
  if (!txt) return;
  if (!user) {
    addMessage({ role: 'bot', message: 'Je moet inloggen om te chatten!' });
    return;
  }

  const now = new Date().toISOString(); // Zorgt voor geldige ISO-datum
  addMessage({ role: 'user', message: txt, created_at: now });
  input.value = '';

  await supabase.from('messages').insert({
    user_id: user.id,
    email: user.email,
    message: txt,
    role: 'user'
  });


}

    supabase.channel('public:messages')
      .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages' }, payload => {
        if (user && payload.new.email === user.email) addMessage(payload.new);
      })
      .subscribe();

    chatToggle.addEventListener('click', () => {
      if (chatBox.classList.contains('active') && user) loadMessages();
    });
  }
</script>
</body>
</html>